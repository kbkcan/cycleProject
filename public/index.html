<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Dashboard">
    <meta name="keyword" content="Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">

    <title>CYCLE DASH</title>

    <!-- Bootstrap core CSS -->
	<link href="assets/css/bootstrap.css" rel="stylesheet">
	<link href="assets/css/font-awesome.css" rel="stylesheet">
	<link href="assets/css/docs.css" rel="stylesheet" >
	<link href="bootstrap-social.css" rel="stylesheet" >
	<!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous"> -->
	<!--external css-->
	<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous"> -->
        
    <!-- Custom styles for this template -->
    <link href="assets/css/style.css" rel="stylesheet">
	<link href="assets/css/style-responsive.css" rel="stylesheet">
	
	 <!-- firebase SDK 링크 -->
	 <script src="https://www.gstatic.com/firebasejs/5.4.1/firebase.js"></script>
	 <script src="https://www.gstatic.com/firebasejs/5.4.1/firebase-app.js"></script>
	 <script src="https://www.gstatic.com/firebasejs/5.4.1/firebase-auth.js"></script>
	 <script src="https://www.gstatic.com/firebasejs/5.4.1/firebase-database.js"></script>
	 
	 <script src="index.js"></script>
	 <script src="fireinit.js"></script>
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
<style>
    .stat>div{
        height: 2em;
        font-size:14px;
        font-weight: bold;
    }
    .stat{
        border-bottom: none !important;
    }
    .stat-img{
        font-size:5em !important;

    }
</style>
</head>


      <!-- **********************************************************************************************************************************************************
      Login CONTENT
      *********************************************************************************************************************************************************** -->

	  <div id="login-page">
	  	<div class="container">
	  	
		      <form class="form-login" action="index.html">
		        <h2 class="form-login-heading">로그인</h2>
		        <div class="login-wrap">
					<!-- 로그인 메일 주소 입력 폼 -->
		            <input id="SIGNIN_MAIL" type="email" class="form-control" placeholder="메일 주소를 입력하세요" autofocus>
					<br>
					<!-- 로그인 패스워드 입력 폼 -->
		            <input id="SIGNIN_PASSWORD" type="password" class="form-control" placeholder="비밀번호를 입력하세요">
		            <label class="checkbox">
		                <span class="pull-right">
		                    <a data-toggle="modal" href="login.html#myModal"> Forgot Password?</a>
		
		                </span>
					</label>
					<!-- 로그인 버튼  -->
		            <button id="BTN_SIGNIN" class="btn btn-theme btn-block" type="button"><i class="fa fa-lock"></i> 회 원 로 그 인 </button>
					<hr>
					
		            <div class="login-social-link centered">
					<p>or you can sign in via your social network</p>
					<a id="BTN_GOOGLE_LOGIN" class="btn btn-block btn-social btn-google">
						<span class="fa fa-google"></span>
						Sign in with Google
					</a>
					<a id="BTN_FACEBOOK_LOGIN" class="btn btn-block btn-social btn-facebook">
						<span class="fa fa-facebook"></span>
						Sign in with Facebook
					</a>
					<a id="BTN_TWITTER_LOGIN" class="btn btn-block btn-social btn-twitter disabled">
						<span class="fa fa-twitter"></span>
						Sign in with Twitter
					</a>
		            </div>
		            <div class="registration">
		                Don't have an account yet?<br/>
		                <a class="" onclick="joinFuction()" href="#">
		                    Create an account
		                </a>
		            </div>
		
		        </div>
		
		          <!-- Modal -->
		          <div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="myModal" class="modal fade">
		              <div class="modal-dialog">
		                  <div class="modal-content">
		                      <div class="modal-header">
		                          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		                          <h4 class="modal-title">Forgot Password ?</h4>
		                      </div>
		                      <div class="modal-body">
		                          <p>Enter your e-mail address below to reset your password.</p>
		                          <input type="text" name="email" placeholder="Email" autocomplete="off" class="form-control placeholder-no-fix">
		
		                      </div>
		                      <div class="modal-footer">
		                          <button data-dismiss="modal" class="btn btn-default" type="button">Cancel</button>
		                          <button class="btn btn-theme" type="button">Submit</button>
		                      </div>
		                  </div>
		              </div>
		          </div>
		          <!-- modal -->
		
		      </form>	  	
	  	
	  	</div>
	  </div>

	  <!-- **********************************************************************************************************************************************************
    Join CONTENT
    *********************************************************************************************************************************************************** -->

    <div id="join-page">
        <div class="container">
        
            <form class="form-login">
                <h2 class="form-login-heading">회원가입</h2>
                <div class="login-wrap">
                    <!-- 회원가입 메일 주소 입력 폼 -->
		            <input id="INPUT_MAIL" type="email" class="form-control" placeholder="메일 주소를 입력하세요" autofocus>
                    <br>
                    <!-- 로그인 패스워드 입력 폼 -->
		            <input id="INPUT_PASSWORD" type="password" class="form-control" placeholder="비밀번호를 입력하세요">
					<br>
					<!-- 로그인 이름 입력 폼 -->
                    <input id="INPUT_NAME" type="text" class="form-control" placeholder="이름을 입력하세요">
                    <br>
					<button id="BTN_SIGNUP" class="btn btn-theme btn-block" type="button"><i class="fa fa-user-plus"></i> Join</button>
					<br>
					<div class="registration">
					<a class="" onclick="joinFuction()" href="#">
						Cancel
					</a>
				  </div>
                </div>       
            </form>	  	
        
        </div>
	</div>
	
    <!-- js placed at the end of the document so the pages load faster -->
    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>

    <!--BACKSTRETCH-->
    <!-- You can use an image of whatever size. This script will stretch to fit in any screen size.-->
    <script type="text/javascript" src="assets/js/jquery.backstretch.min.js"></script>
    <script>
        $.backstretch("assets/img/login-bg.jpg", {speed: 500});
	</script>
 <script type="text/javascript">
   /* 인증 상태 변화 감시하기 */
   firebase.auth().onAuthStateChanged(function(user) {
	 if (user) { // 인증되었을 때
		// firebase.database().ref('users/' + user.uid).set({
		// 		"useremail": user.email,
		// 		"username": user.displayName
		// 		});
	   location.href="./dash.html";
	 } else { // 인증되지 않았을 때
	   $('#AUTH_STATE').text("(인증되지 않음)");
	   $('#BTN_LOGOUT').hide();
	   $('#USER_INFO').hide();
	 }
   });
    /* 회원 가입을 눌렀을 경우  */
 	$('#BTN_SIGNUP').click(function(){
    var signup_mail = $('#INPUT_MAIL').val();
    var signup_password = $('#INPUT_PASSWORD').val();
    var signup_name = $('#INPUT_NAME').val();

    firebase.auth().createUserWithEmailAndPassword(signup_mail, signup_password).then(function(){
      // 메일 회원 가입에 성공 했을때
      /* 회원 정보 갱신 = 페이지 새로 고침 */
      var user = firebase.auth().currentUser;
      user.updateProfile({
          displayName: signup_name
        }).then(function() {	
          location.reload();
        }).catch(function(error) {
        });
      alert("성공적으로 가입되었습니다.");
      // 자동 로그인 성공으로 간주 = onAuthStateChanged()가 동작함
    }).catch(function(error) {
      // 메일 회원 가입에 실패 했을때
      alert(error.message);
    });
  });

	/* 회원가입 페이지 Enter Key를 눌렀을 경우  */
	var input = document.getElementById("INPUT_NAME");
	input.addEventListener("keyup", function(event) {
		event.preventDefault();
		if (event.keyCode === 13){
			document.getElementById("BTN_SIGNUP").click();
		}
	});

	/* 로그인 페이지 Enter Key를 눌렀을 경우  */
	var input = document.getElementById("SIGNIN_PASSWORD");
	input.addEventListener("keyup", function(event) {
		event.preventDefault();
		if (event.keyCode === 13){
			document.getElementById("BTN_SIGNIN").click();
		}
	});

	/* 로그인 버튼 클릭시 처리하기 */
	$('#BTN_SIGNIN').click(function(){
	var signin_mail = $('#SIGNIN_MAIL').val();
	var signin_password = $('#SIGNIN_PASSWORD').val();
	firebase.auth().signInWithEmailAndPassword(signin_mail, signin_password).then(function(){
		// 메일 회원 로그인 성공으로 간주 = onAuthStateChanged()가 동작함
		location.href = "./dash.html";
	}).catch(function(error) {
		// 회원 로그인에 실패 했을 경우
		alert(error.message);
	});
	});

	/* 구글버튼을 눌렀을 경우 인증 동작하게 */
	$('#BTN_GOOGLE_LOGIN').click(function(){ // jQuery를 이용
		/* 구글 인증을 provider 변수에 대체 */
		var provider = new firebase.auth.GoogleAuthProvider();
		firebase.auth().signInWithRedirect(provider)
		firebase.auth().getRedirectResult().then(function(result) {
		if (result.credential) {
				var token = result.credential.accessToken;
			}
			// The signed-in user info.
			var user = result.user;
				}).catch(function(error) {
					// Handle Errors here.
					var errorCode = error.code;
					var errorMessage = error.message;
					// The email of the user's account used.
					var email = error.email;
					// The firebase.auth.AuthCredential type that was used.
					var credential = error.credential;
					alert(error.message);
					break;
					// ...
					});
		});

	/* 트위터버튼을 눌렀을 경우 인증 동작하게 */
	$('#BTN_TWITTER_LOGIN').click(function(){ // jQuery를 이용
		/* 트위터버튼 인증을 provider 변수에 대체 */
		alert("트위터버튼 미완료");
		var provider = new firebase.auth.GoogleAuthProvider();
		firebase.auth().signInWithRedirect(provider);
		firebase.auth().getRedirectResult().then(function(result) {
			if (result.credential) {
				// This gives you a Google Access Token. You can use it to access the Google API.
				var token = result.credential.accessToken;
				}
				// The signed-in user info.
				var user = result.user;
			//   location.href = "./";
				}).catch(function(error) {
					// Handle Errors here.
					var errorCode = error.code;
					var errorMessage = error.message;
					// The email of the user's account used.
					var email = error.email;
					// The firebase.auth.AuthCredential type that was used.
					var credential = error.credential;
					// ...
					});
		});

	/* 페이스북버튼을 눌렀을 경우 인증 동작하게 */
	$('#BTN_FACEBOOK_LOGIN').click(function(){ // jQuery를 이용
		/* 페이스북 인증을 provider 변수에 대체 */
		var provider = new firebase.auth.FacebookAuthProvider();
		firebase.auth().signInWithRedirect(provider);
		firebase.auth().getRedirectResult().then(function(result) {
			if (result.credential) {
				// This gives you a Google Access Token. You can use it to access the Google API.
				var token = result.credential.accessToken;
				}
				// The signed-in user info.
				var user = result.user;
			//   location.href = "./";
				}).catch(function(error) {
					// Handle Errors here.
					var errorCode = error.code;
					var errorMessage = error.message;
					// The email of the user's account used.
					var email = error.email;
					// The firebase.auth.AuthCredential type that was used.
					var credential = error.credential;
					// ...
					});
		});
	</script>
  </body>
</html>
